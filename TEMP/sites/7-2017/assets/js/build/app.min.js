var width=$(window).width(),height=$(window).height(),isMobile=!1,$root="/";$(function(){var a={init:function(){$(window).resize(function(a){}),$(document).ready(function(b){$body=b("body"),$container=b("#container"),a.sizeSet(),History.Adapter.bind(window,"statechange",function(){var b=History.getState();console.log(b);b.data;a.loadContent(b.url,$container)}),a.loadSlider(),window.viewportUnitsBuggyfill.init(),b("body").on("click","[data-target]",function(c){$el=b(this),target=$el.data("target"),c.preventDefault(),"page"==target?History.pushState({type:"page"},$el.data("title")+" | "+$sitetitle,$el.attr("href")):"project"==target?History.pushState({type:"project"},$el.data("title")+" | "+$sitetitle,$el.attr("href")):(c.preventDefault(),a.goIndex())}),b(document).keyup(function(b){27===b.keyCode&&a.goIndex(),37===b.keyCode&&$slider&&a.goPrev($slider),39===b.keyCode&&$slider&&a.goNext($slider)}),b(window).load(function(){b("#intro").length>0&&!isMobile?(b("#intro img").each(function(){var a=b(this),c=Math.floor(48*Math.random())+10;a.css({left:c+"%",opacity:1})}),b("#intro").click(function(a){var c=b(this);c.find("img").css("opacity",0),setTimeout(function(){$body.addClass("loaded"),setTimeout(function(){c.remove()},1e3)},300)})):$body.addClass("loaded")})})},sizeSet:function(){width=$(window).width(),height=$(window).height(),770>=width&&(isMobile=!0),isMobile&&width>=770&&(isMobile=!1)},loadSlider:function(){$slider=$("#slider").flickity({cellSelector:".cell",imagesLoaded:!1,lazyLoad:2,setGallerySize:!1,accessibility:!1,wrapAround:!0,prevNextButtons:!1,pageDots:!1,draggable:!0}),setTimeout(function(){$slider.flickity("resize")},300),flkty=$slider.data("flickity"),$caption=$("#slide-caption"),$slider.on("select.flickity",function(){if(flkty){var a=$(flkty.selectedElement).attr("data-caption");"undefined"!=typeof a&&a!==!1&&$caption.html("<p>"+a+"</p>")}}),$slider.on("staticClick.flickity",function(b,c,d,e){d&&a.goNext($slider)})},goNext:function(a){a.flickity("next",!1)},goPrev:function(a){a.flickity("previous",!1)},goIndex:function(){History.pushState({type:"index"},$sitetitle,window.location.origin+$root)},loadContent:function(b,c){$body.addClass("loading"),setTimeout(function(){$(window).scrollTop(0),$(c).load(b+" #container .inner",function(b){setTimeout(function(){$("#container .inner").hasClass("project")&&a.loadSlider(),$body.removeClass("loading").addClass("loaded")},100)})},1e3)},deferImages:function(){for(var a=document.getElementsByTagName("img"),b=0;b<a.length;b++)a[b].getAttribute("data-src")&&a[b].setAttribute("src",a[b].getAttribute("data-src"))}};a.init()});
//# sourceMappingURL=app.min.js.map